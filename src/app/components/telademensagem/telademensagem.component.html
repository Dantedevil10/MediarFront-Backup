<app-header-log></app-header-log>
<section>
  <div id="all-content" >
    <div id="left">
      <div id="people">
        <div id="label-people">
            <label for="people"><b>Pessoas</b></label>
        </div>
        <div id="contact-people" *ngFor="let item of user?.contatos" (click)="contatoSelect(item.contato.nomeUsuario,item.contato.id)">
          <div id="contact">
            {{ item.contato.nomeUsuario.charAt(0) | uppercase }}
          </div>
          <div id="info">
            <div id="info-separator">
              <div id="name" style="padding-bottom: 5px;margin-top: 5px;">
                  {{item.contato.nomeUsuario}}
              </div>
            </div>
            <div id="info-separator2">
              <div id="msg-ntfy">
                <div id="msg-ntfy-MSG">
                    <h5>{{item.contato.email}}</h5>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="message" >
      <nav *ngIf="contatoSelecionado && selecionado">

        <div id="separator">

          <div id="name-status">
            <label for="img" style="font-size: 1.5rem;">{{contatoSelecionado}}</label>
            <h5>status</h5>
          </div>
        </div>

      </nav>

      <main style="overflow: auto;background-color: #1b334609;">
        <div *ngIf="selecionado">
          <div id="chatbox" *ngIf="mensagens && mensagens.length > 0">
            <!-- Loop through mensagens and display them based on sender and recipient -->
            <div *ngFor="let men of mensagens">
              <!-- My messages -->
              <div *ngIf="men.remetente.nomeUsuario === user?.nomeUsuario">
                <div class="my-message">
                  <p>{{ men.conteudo }}<br><span style="font-size: 0.7rem;">{{ men.dataEnvio | date:'dd/MM/yyyy HH:mm' }}</span></p>
                </div>
              </div>

              <!-- Other person's messages -->
              <div *ngIf="men.remetente.nomeUsuario !== user?.nomeUsuario">
                <div class="other-message">
                  <p>{{ men.conteudo }}<br><span style="font-size: 0.7rem;">{{ men.dataEnvio | date:'dd/MM/yyyy HH:mm' }}</span></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>



      <footer *ngIf="selecionado">
        <div id="footer-area">
          <div id="text-container">
            <input id="ca" type="text" [(ngModel)]="enviarMen.conteudo" placeholder="Digite a Sua Mensagem Aqui">
          </div>
          <div id="button">
            <button (click)="enviarMensagem()" type="button"><img src="assets/icons/1373410.png" alt="" height="35px"></button>
          </div>
        </div>
      </footer>

    </div>

  </div>

    <!-- Exibe somente em telas pequenas -->
  <div id="mobile-message">
    <h1>Desculpe Mas O Chat Não Está Disponível para Celulares <br/>
    Clique na Logo do Sistema para Retornar a Página Principal</h1>
  </div>
</section>
